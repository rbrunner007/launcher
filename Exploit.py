#!/usr/bin/env python3

from socket import *

class Exploit():
    def __init__(self, ip, port=False, debug=False):
        self.ip = ip
        self.port = port
        self.debug = debug
        self.dprint("Launching Exploit")
        self.sock = self.connect_to_client()

    #this is a debug print. Set debug to True to see
    #set debug to false to turn off
    def dprint(self, text, name=__name__):
        if self.debug:
            print("[d] " + name + ": " + text)

    #basic connect to client
    def connect_to_client(self):
        if self.port:
            try:
                # Create a TCP/IP socket
                sock = socket(AF_INET, SOCK_STREAM)
                # Connect the socket to the port where the server is listening
                server_address = (self.ip, self.port)
                self.dprint('Connecting to %s:%s.' % server_address)
                #sock.connect(server_address)
                return sock
            except socket.timeout as e:
                print("[!] Socket Timed Out")
                return None
            except:
                print("[!] Error in opening socket")
                return None
        else:
            print("[!] No Port Specified")

    #basic client_recv example
    def client_recv():
        data = sock.recv(1000)
        while data == "":
            data = sock.recv(1000)
        return data
    
    def client_send(msg):
        sock.send(msg)

